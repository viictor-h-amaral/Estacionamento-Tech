@model IEnumerable<EstacionamentoTech.Models.Veiculo>

<style>
    .pagination {
        margin: 20px 0;
    }

    .pagination-info {
        text-align: center;
        margin-top: 10px;
    }

    .page-link {
        color: #007bff;
    }

    .page-item.active .page-link {
        background-color: #007bff;
        border-color: #007bff;
    }
</style>

@{
	ViewData["Title"] = "Veículos";
	int paginaAtual = ViewBag.PaginaAtual ?? 1;
	int totalPaginas = ViewBag.TotalPaginas ?? 1;

	string placa = ViewBag.Placa ?? "";
	string cliente = ViewBag.Cliente ?? "";
	string nome = ViewBag.Nome ?? "";
	string tipo = ViewBag.Tipo ?? "";

	bool possuiFiltro = !string.IsNullOrEmpty(placa)
						|| !string.IsNullOrEmpty(cliente)
						|| !string.IsNullOrEmpty(nome)
						|| !string.IsNullOrEmpty(tipo);
}

<h2>@ViewData["Title"]</h2>

<p>
	<a asp-action="NovoVeiculo" class="btn btn-primary">Adicionar Novo Veículo</a>
</p>

<table class="table">

	<form asp-action="Index" method="get">
		<div class="form-group">
			<div>
				<h6>Placa:</h6> <input type="text" name="Placa" value="@placa" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Nome do veículo:</h6> <input type="text" name="Nome" value="@nome" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Proprietário:</h6> <input type="text" name="Cliente" value="@cliente" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Tipo de veículo:</h6> <input type="text" name="Tipo" value="@tipo" class="btn btn-outline-dark">
			</div>
			<br />
			<input type="submit" value="Buscar" class="btn btn-primary" />
			@if (possuiFiltro)
			{
				<a asp-action="Index" class="btn btn-secondary">Limpar Filtros</a>
			}
		</div>
		<br />
	</form>

	<thead>
		<tr>
			<th>
				@Html.DisplayNameFor(model => model.Id)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Nome)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.NomeCliente)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Ano)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Tipo)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.Placa)
			</th>
			<th>
			</th>
		</tr>
	</thead>

	<tbody>
		@foreach (var veiculo in Model)
		{
			<tr>
				<td>
					@Html.DisplayFor(model => veiculo.Id)
				</td>
				<td>
					@Html.DisplayFor(model => veiculo.Nome)
				</td>
				<td>
					@Html.DisplayFor(model => veiculo.NomeCliente)
				</td>
				<td>
					@Html.DisplayFor(model => veiculo.Ano)
				</td>
				<td>
					@Html.DisplayFor(model => veiculo.Tipo)
				</td>
				<td>
					@Html.DisplayFor(model => veiculo.Placa)
				</td>
				<td>
					<a asp-action="EditarVeiculo" asp-route-id="@veiculo.Id" class="btn btn-secondary">Editar</a> |
					<a asp-action="DeletarVeiculo" asp-route-id="@veiculo.Id" class="btn btn-danger">Deletar</a>
				</td>
			</tr>
		}
	</tbody>

</table>

<!-- Estrutura de paginação -->
@if (totalPaginas > 1)
{
	<nav aria-label="Navegação de páginas">
		<ul class="pagination">
			<!-- Botão Anterior -->
			@if (paginaAtual > 1)
			{
				<li class="page-item">
					<a class="page-link" href="@Url.Action("Index", 
									new {	pagina = paginaAtual - 1, 
											registrosPorPagina = ViewBag.RegistrosPorPagina,	
											Placa = placa,
											Nome = nome,
											Cliente = cliente,
											Tipo = tipo})">
						Anterior
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<span class="page-link">Anterior</span>
				</li>
			}

			<!-- Números das Páginas -->
			@for (int i = 1; i <= totalPaginas; i++)
			{
				if (i == paginaAtual)
				{
					<li class="page-item active">
						<span class="page-link">@i</span>
					</li>
				}
				else
				{
					<li class="page-item">
						<a class="page-link" href="@Url.Action("Index", 
								new {	pagina = i, 
										registrosPorPagina = ViewBag.RegistrosPorPagina, 
										Placa = placa,
										Nome = nome,
										Cliente = cliente,
										Tipo = tipo})">
							@i
						</a>
					</li>
				}
			}

			<!-- Botão Próximo -->
			@if (paginaAtual < totalPaginas)
			{
				<li class="page-item">
					<a class="page-link" href="@Url.Action("Index", 
						new {	pagina = paginaAtual + 1, 
								registrosPorPagina = ViewBag.RegistrosPorPagina, 
								Placa = placa,
								Nome = nome,
								Cliente = cliente,
								Tipo = tipo})">
						Próximo
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<span class="page-link">Próximo</span>
				</li>
			}
		</ul>
	</nav>
}

<div class="pagination-info">
	<small class="text-muted">
		Página @paginaAtual de @totalPaginas
	</small>
</div>