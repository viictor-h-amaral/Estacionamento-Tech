@model IEnumerable<EstacionamentoTech.Models.TabelaValores>

<style>
	.pagination {
		margin: 20px 0;
	}

	.pagination-info {
		text-align: center;
		margin-top: 10px;
	}

	.page-link {
		color: #007bff;
	}

	.page-item.active .page-link {
		background-color: #007bff;
		border-color: #007bff;
	}
</style>

@{
	ViewData["Title"] = "Vigências";
	int paginaAtual = ViewBag.PaginaAtual ?? 1;
	int totalPaginas = ViewBag.TotalPaginas ?? 1;
	string inicioVigencia = ViewBag.InicioVigencia ?? "";
	string fimVigencia = ViewBag.FimVigencia ?? "";
	string horaInicial = ViewBag.HoraInicial ?? "";
	string horaAdicional = ViewBag.HoraAdicional ?? "";

	bool possuiFiltro = !string.IsNullOrEmpty(inicioVigencia)
						|| !string.IsNullOrEmpty(fimVigencia)
						|| !string.IsNullOrEmpty(horaInicial)
						|| !string.IsNullOrEmpty(horaAdicional);
}

<h2>@ViewData["Title"]</h2>

<p>
	<a asp-action="NovaVigencia" class="btn btn-primary">Adicionar Nova Vigência</a>
</p>

<table class="table">

	<form asp-action="Index" method="get">
		<div class="form-group">
			<div>
				<h6>Fim posterior à:</h6> <input type="date" name="InicioVigencia" value="@inicioVigencia" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Início anterior à:</h6> <input type="date" name="FimVigencia" value="@fimVigencia" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Hora inicial:</h6> <input type="number" step="0.01" name="HoraInicial" value="@horaInicial" class="btn btn-outline-dark">
			</div>
			<div>
				<h6>Hora adicional:</h6> <input type="number" step="0.01" name="HoraAdicional" value="@horaAdicional" class="btn btn-outline-dark">
			</div>
			<br />
			<input type="submit" value="Buscar" class="btn btn-primary" />
			@if (possuiFiltro)
			{
				<a asp-action="Index" class="btn btn-secondary">Limpar Filtros</a>
			}
		</div>
		<br />
	</form>

	<thead>
		<tr>
			<th>
				@Html.DisplayNameFor(model => model.Id)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.DataInicio)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.DataFim)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.ValorHoraInicial)
			</th>
			<th>
				@Html.DisplayNameFor(model => model.ValorHoraAdicional)
			</th>
			<th>
			</th>
		</tr>
	</thead>

	<tbody>
		@foreach (var vigencia in Model)
		{
			<tr>
				<td>
					@Html.DisplayFor(model => vigencia.Id)
				</td>
				<td>
					@Html.DisplayFor(model => vigencia.DataInicio)
				</td>
				<td>
					@Html.DisplayFor(model => vigencia.DataFim)
				</td>
				<td>
					@Html.DisplayFor(model => vigencia.ValorHoraInicial)
				</td>
				<td>
					@Html.DisplayFor(model => vigencia.ValorHoraAdicional)
				</td>
				<td>
					<a asp-action="EditarVigencia" asp-route-id="@vigencia.Id" class="btn btn-secondary">Editar</a> |
					<a asp-action="DeletarVigencia" asp-route-id="@vigencia.Id" class="btn btn-danger">Deletar</a>
				</td>
			</tr>
		}
	</tbody>

</table>

<!-- Estrutura de paginação -->
@if (totalPaginas > 1)
{
	<nav aria-label="Navegação de páginas">
		<ul class="pagination">
			<!-- Botão Anterior -->
			@if (paginaAtual > 1)
			{
				<li class="page-item">
					<a class="page-link" href="@Url.Action("Index", 
									new {	pagina = paginaAtual - 1, 
											registrosPorPagina = ViewBag.RegistrosPorPagina,	
											InicioVigencia = inicioVigencia,
											FimVigencia = fimVigencia,
											HoraInicial = horaInicial,
											HoraAdicional = horaAdicional})">
						Anterior
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<span class="page-link">Anterior</span>
				</li>
			}

			<!-- Números das Páginas -->
			@for (int i = 1; i <= totalPaginas; i++)
			{
				if (i == paginaAtual)
				{
					<li class="page-item active">
						<span class="page-link">@i</span>
					</li>
				}
				else
				{
					<li class="page-item">
						<a class="page-link" href="@Url.Action("Index", 
								new {	pagina = i, 
										registrosPorPagina = ViewBag.RegistrosPorPagina, 
										InicioVigencia = inicioVigencia,
										FimVigencia = fimVigencia,
										HoraInicial = horaInicial,
										HoraAdicional = horaAdicional})">
							@i
						</a>
					</li>
				}
			}

			<!-- Botão Próximo -->
			@if (paginaAtual < totalPaginas)
			{
				<li class="page-item">
					<a class="page-link" href="@Url.Action("Index", 
						new {	pagina = paginaAtual + 1, 
								registrosPorPagina = ViewBag.RegistrosPorPagina, 
								InicioVigencia = inicioVigencia,
								FimVigencia = fimVigencia,
								HoraInicial = horaInicial,
								HoraAdicional = horaAdicional})">
						Próximo
					</a>
				</li>
			}
			else
			{
				<li class="page-item disabled">
					<span class="page-link">Próximo</span>
				</li>
			}
		</ul>
	</nav>
}

<div class="pagination-info">
	<small class="text-muted">
		Página @paginaAtual de @totalPaginas
	</small>
</div>